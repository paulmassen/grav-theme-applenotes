{% set isSelected = (selectedNoteSlug == item.slug) %}
{% set isHighlighted = (isSearching and highlightedIndex is defined and highlightedIndex == loop.index0) or (not isSearching and isSelected) %}
{% set preview = item.content|striptags|replace({'![': '', '](': '', ')': '', '[': '', ']': '', '#': '', '*': '', '_': '', '~': '', '`': '', '>': '', '+': '', '-': ''})|replace({'\n\n': ' ', '\n': ' '})|trim|slice(0, 100) %}
{% set displayDate = item.date|date('M d, Y') %}
<li tabindex="0" class="note-item h-[70px] w-full {% if isHighlighted %}bg-[#FFE390] dark:bg-[#9D7D28] dark:text-white rounded-md{% endif %} {% if showDivider and not isHighlighted %}note-item-divider{% endif %}" data-note-slug="{{ item.slug }}" data-note-id="{{ item.id }}">
    <div class="h-full w-full px-4">
        <a href="{{ item.url }}" class="py-2 h-full w-full flex flex-col justify-center">
            <h2 class="text-sm font-bold px-2 break-words line-clamp-1 note-item-title">
                {{ item.header.emoji|default('üìù') }}
                {{ item.title }}
            </h2>
            <p class="text-xs pl-2 break-words line-clamp-1 note-item-preview {% if isHighlighted %}text-muted-foreground dark:text-white/80{% else %}text-muted-foreground{% endif %}">
                <span class="note-item-date">
                    {{ displayDate }}
                </span>
                {{ preview }}
            </p>
        </a>
    </div>
</li>
<style>
.note-item {
    cursor: pointer;
    transition: background-color 0.2s;
}

.note-item:hover {
    background-color: hsl(var(--muted-foreground) / 0.1);
}

.note-item-title {
    color: hsl(var(--foreground));
}

.dark .note-item-title {
    color: hsl(var(--foreground));
}

.note-item-preview {
    color: hsl(var(--muted-foreground));
}

.note-item-date {
    color: hsl(var(--foreground));
}

.dark .note-item-date {
    color: white;
}

.note-item-divider::after {
    content: "";
    display: block;
    margin: 0 0.5rem;
    border-top: 1px solid hsl(var(--muted-foreground) / 0.2);
}

.h-\[70px\] {
    height: 70px;
}

.text-sm {
    font-size: 0.875rem;
}

.font-bold {
    font-weight: 700;
}

.px-2 {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
}

.break-words {
    word-break: break-word;
}

.line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.text-xs {
    font-size: 0.75rem;
}

.pl-2 {
    padding-left: 0.5rem;
}

.bg-\[#FFE390\] {
    background-color: #FFE390;
}

.dark\:bg-\[#9D7D28\] {
    background-color: #9D7D28;
}

.rounded-md {
    border-radius: 0.375rem;
}

.px-4 {
    padding-left: 1rem;
    padding-right: 1rem;
}

.py-2 {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
}
</style>
